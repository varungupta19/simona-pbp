version: 2
jobs:  
 build: 
  docker: 
   - image: circleci/node:8.4 
  working_directory: ~/repo
  steps:
   - checkout 
   
   - run: npm install 

   - restore_cache:
          keys:
          - v1-dependencies-{{ checksum "package.json" }}
          # fallback to using the latest cache if no exact match is found
          - v1-dependencies-   
          
   - save_cache:
      paths:
       - node_modules
      key : v1-dependencies-{{checksum "package.json"}}     

   - run: npm build
   - run:
          name: Creating Dummy Artifacts
          command: |
            echo "my artifact file" > /repo/artifact-1;
            mkdir /repo/artifacts;
            echo "my artifact files in a dir" > /repo/artifacts/artifact-2;

   - store_artifacts:
          path: /repo/artifact-1
          destination: artifact-file
   
   
   
   - store_artifacts:               
          path: /repo/